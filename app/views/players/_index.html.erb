<p id="notice"><%= notice %></p>

<h1>Players</h1>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Rating</th>          
      <th>Gender</th>
      <th>DOB</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% orderedPlayers = @players.sorted_by_twentyGameAverage %>
    <% orderedPlayers.each do |player| %>
      <tr>
        <td>
            <%= link_to player, :class => "", remote: true do %>
              <%= player.fullName %>
            <% end %>
        </td>
        <td><%= number_with_precision(player.twentyGameAverage, :precision => 2) %>
          <% form_status = player.fiveGameAverage - player.twentyGameAverage %>

          <% if form_status < -3 %>
            <% imageName = "red_very_down.png" %>
            <% imageAlt = "very down" %>
          <% elsif form_status < -1 %>
            <% imageName = "red_medium_down.png" %>
            <% imageAlt = "medium down" %>            
          <% elsif form_status < 0 %>
            <% imageName = "red_slightly_down.png" %>
            <% imageAlt = "very down" %>
          <% elsif form_status > 3 %>
            <% imageName = "green_very_up.png" %>
            <% imageAlt = "very up" %>
          <% elsif form_status > 1 %>
            <% imageName = "green_medium_up.png" %>
            <% imageAlt = "up" %>
          <% elsif form_status > 0 %>
            <% imageName = "green_slightly_up.png" %>
            <% imageAlt = "slightly up" %>
          <% end %>

          <% if imageName.present? %>
            <%= image_tag(imageName, :size => "16x16", :alt => imageAlt) %>
          <% end %>
        </td>
        <td><%= player.gender %></td>
        <td><%= player.dob %></td>
        <td><%= link_to 'Show', player, :class => "", remote: true %></td>
        <td><%= link_to 'Edit', edit_player_path(player) %></td>
        <td><%= link_to 'Destroy', player, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to 'New Player', new_player_path %>
